var __adminHide={},__adminInterval=setInterval("__checkAdminHide()",500),__admMPos={x:0,y:0};function showAdminMenu(A,B){var C=$(A);__adminHide[A]=false;if(C&&!B&&!C.visible()){window.setTimeout("__showAdminMenu('"+A+"',"+B+")",1000)}else{if(C&&B){__adminHide[A]=true}}}function __checkAdminHide(){Object.keys(__adminHide).each(function(A){if(__adminHide[A]){Element.hide(A)}})}function __showAdminMenu(A,B){var D=$(A),C;if(D&&!__adminHide[A]){if(!D.visible()&&!B){if($("fixIEhead")){D.style.left=__admMPos.x+"px";D.style.top=__admMPos.y+"px";D.style.position="fixed"}else{if($("navi")){C=$("navi").style;D.style.left=(__admMPos.ox-parseInt(C.marginLeft))+"px";D.style.top=(__admMPos.oy-parseInt(C.marginTop))+"px";D.style.zIndex=999}else{D.style.left=__admMPos.x+"px";D.style.top=__admMPos.y+"px";D.style.position="fixed"}}Element.show(A)}}}function __getCumulativeMargin(B){var A={top:0,left:0,right:0,bottom:0},D={top:0,left:0,right:0,bottom:0},C=B.parentNode;if(C.nodeName.toLowerCase()!="body"){A=__getCumulativeMargin(C)}D.top=isNaN(C.style.marginTop)?A.top:C.style.marginTop+A.top;D.right=isNaN(C.style.marginRight)?A.right:C.style.marginRight+A.right;D.bottom=isNaN(C.style.marginBottom)?A.bottom:C.style.marginBottom+A.bottom;D.left=isNaN(C.style.marginLeft)?A.left:C.style.marginLeft+A.left;return D}function __grabMousePos(A){A=!A?window.event:A;__admMPos.x=A.clientX;__admMPos.y=A.clientY;__admMPos.ox=is_IE?A.offsetX:A.layerX;__admMPos.oy=is_IE?A.offsetY:A.layerY;__admMPos.sy=Element.cumulativeScrollOffset($("body")).top}Event.observe("body","mousemove",__grabMousePos);function showCreateText(){var A=$("adm_newtext_sub");if(typeof (A)!="undefined"){if(A.style.display=="block"){A.style.display="none"}else{A.style.display="block"}}}function openAdmin(A,F,G,E){var B=initAdminEditor();if(typeof (E)!="number"){E=0}if(E>100){alert("Beim ??ffnen des Editors ist etwas fehlgeschlagen. Es konnte keine Instanz des Editors erstellt werden w??hrend den letzten 100 Versuchen.");return }if(B==null){window.setTimeout(function(){openAdmin(A,F,G,E++)},100);return }console.info("Tried to create an Instance "+E+" times...");var D=(typeof (G)!="undefined"),C="/delight_hp/index.php?lang="+dedtEditorLanguage_Short+"&adm="+A+"&action=template";C+=(typeof (G)!="undefined")?"&entry="+G:"";C+=(typeof (F)!="undefined")?"&template="+F:"";C+=D?"&iscontent=true":"";B.windowManager.open({file:C,width:600,height:400,inline:true,resizable:true,maximizable:!D},{plugin_url:tinymce.baseURL+"/../admin_editor/",theme_url:tinymce.baseURL+"/themes/advanced/"})}function createMenu(B,C){var A=initAdminEditor();if(typeof (C)!="number"){C=0}if(C>100){alert("Beim ??ffnen des Editors ist etwas fehlgeschlagen. Es konnte keine Instanz des Editors erstellt werden w??hrend den letzten 100 Versuchen.");return }if(A==null){window.setTimeout(function(){createMenu(B,C++)},100);return }console.info("Tried to create an Instance "+C+" times...");A.windowManager.open({url:ADMIN_LINK_MENU_CREATE.replace(/&amp;/gi,"&")+B,width:500,height:240,inline:true,resizable:true,maximizable:true},{theme_url:tinymce.baseURL+"/themes/advanced/"})}function changeMenu(B,C){var A=initAdminEditor();if(typeof (C)!="number"){C=0}if(C>100){alert("Beim ??ffnen des Editors ist etwas fehlgeschlagen. Es konnte keine Instanz des Editors erstellt werden w??hrend den letzten 100 Versuchen.");return }if(A==null){window.setTimeout(function(){changeMenu(B,C++)},100);return }console.info("Tried to create an Instance "+C+" times...");A.windowManager.open({url:ADMIN_LINK_MENU_EDIT.replace(/&amp;/gi,"&")+B,width:500,height:240,inline:true,resizable:true,maximizable:true},{theme_url:tinymce.baseURL+"/themes/advanced/"})}function deleteMenu(B,C){var A=initAdminEditor();if(typeof (C)!="number"){C=0}if(C>100){alert("Beim ??ffnen des Editors ist etwas fehlgeschlagen. Es konnte keine Instanz des Editors erstellt werden w??hrend den letzten 100 Versuchen.");return }if(A==null){window.setTimeout(function(){deleteMenu(B,C++)},100);return }console.info("Tried to create an Instance "+C+" times...");A.windowManager.open({url:ADMIN_LINK_MENU_DELETE.replace(/&amp;/gi,"&")+B,width:500,height:210,inline:true,resizable:true,maximizable:true},{theme_url:tinymce.baseURL+"/themes/advanced/"})}(function(){tinyMCE.init({language:dedtEditorLanguage_Short,mode:"none",theme:"advanced",elements:"dynamic_loaded_elements",dialog_type:"modal",relative_urls:false,plugins:"safari,visualchars,inlinepopups,spellchecker,style,layer,table,ajaxsave,advhr,advimage,advlink,insertdatetime,flash,searchreplace,print,contextmenu,paste,directionality,noneditable,delighttitle,delightform",theme_advanced_buttons1:"cancel,save,print,code,|,cut,copy,paste,pastetext,pasteword,|,undo,redo,|,spellchecker,search,replace",theme_advanced_buttons1_add:"|,anchor,link,unlink,image,flash,|,visualchars",theme_advanced_buttons2:"fontsizeselect,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull",theme_advanced_buttons2_add:"|,bullist,numlist,|,sub,sup,|,indent,outdent,|,cleanup,styleprops",theme_advanced_buttons3:"tablecontrols,|,insertdate,inserttime,advhr,charmap,|,removeformat,forecolor,backcolor",theme_advanced_buttons4:"delighttitle,delighttpl,|,delightform_config,delightform_edit,delightform_select,delightform_radio,delightform_checkbox,delightform_button",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_path_location:"bottom",plugin_insertdate_dateFormat:"%Y-%m-%d",plugin_insertdate_timeFormat:"%H:%M:%S",extended_valid_elements:"form[name|id|method|action],input[name|value|style|class|type|id|title|size|checked|selected],select[name|class|style|id|title|size],option[value|class|style|id|selected],textarea[name|cols|rows|class|style|id|title],iframe[name|id|src|style|frameborder|width|height|scrolling|marginwidth|marginheight],map[name|id|title|class|style],area[name|id|shape|coords|alt|title|href|nohref|onblur|onfocus|onmouseover|onmouseout|tabindex|target|accesskey|style|class]",font_size_style_values:"small,big",element_format:"xhtml",theme_advanced_resize_horizontal:false,theme_advanced_resizing_use_cookie:true,theme_advanced_resizing:true,apply_source_formatting:true,theme_advanced_path:false,popup_screen_center:false,convert_fonts_to_spans:true,cleanup:true,cleanup_on_startup:true,inline_styles:true,trim_span_elements:true,font_size_style_values:"8pt,9pt,10pt,11pt,12pt,14pt,16pt,18pt",width:"550",delighttitle_title_field:null,delighttitle_options_field:null,delighttitle_templateurl:"/delight_hp/index.php",delighttitle_templateparams:{adm:155,textContent:"ajaxtemplates"},delighttitle_templateparamid:"textOptions",paste_auto_cleanup_on_paste:true,spellchecker_languages:"+Deutsch=de,English=en,French=fr",content_css:editorContentCSS?editorContentCSS:"",setup:function(A){A.onSetProgressState.add(function(C,B){if(B){if(!$("dedtProgressBar")){var E=document.createElement("div");E.setAttribute("id","dedtProgressBar");E.className="clearlooks2_modalBlocker";E.style.zIndex=399999;document.body.appendChild(E)}if(!$("dedtProgressBarImage")){var E=document.createElement("div");E.setAttribute("id","dedtProgressBarImage");E.style.textAlign="center";E.style.width="100%";E.style.position="absolute";E.style.zIndex=400001;E.innerHTML='<div style="border:1px solid #000;background:#FFF;width:226px;margin: 3px auto;"><img src="/delight_hp/data/loading.gif" style="width:220px;height:19px;border:none;" alt="progress" /><br/>working...</div>';document.body.appendChild(E)}$("dedtProgressBar").style.display="block";$("dedtProgressBarImage").style.display="block";$("dedtProgressBarImage").style.top=(window.scrollY+100)+"px";window.progressOpen=(new Date()).getTime()}else{var F=window.progressOpen||(new Date()).getTime(),D=(new Date()).getTime()-F;window.setTimeout(function(){if($("dedtProgressBar")){$("dedtProgressBar").style.display="none"}if($("dedtProgressBarImage")){$("dedtProgressBarImage").style.display="none"}},D<500?500-D:1)}})}})})();function initAdminEditor(){var B,D,A=$("adminTextarea");if(!A){D=document.createElement("div");D.style.display="block";D.style.position="absolute";D.setAttribute("id","adminTextareaDiv");D.style.top="-1000px";D.style.left="-1000px";A=document.createElement("textarea");A.setAttribute("id","adminTextarea");A.setAttribute("name","adminTextarea");A.style.width="300px";A.style.height="300px";D.appendChild(A);document.body.appendChild(D)}try{tinyMCE.execCommand("mceAddControl",true,"adminTextarea");B=tinyMCE.get("adminTextarea");B.focus();$("adminTextarea_parent").style.display="block";$("adminTextarea_parent").style.top="-500px"}catch(C){return null}return B}var AdminMenuClass=Class.create({id:0,doShow:false,doHide:true,edit:"",oldValue:"",showTimeout:100,isGrouped:false,isGroupContainer:false,initialize:function(B,A){this.id=B;this.edit=A;this.isGroupContainer=(A=="grouped");this.startObservers();this.isGrouped=$("grouped_content_"+this.id)!=null},getAdminContainer:function(){var A=$("admcont_"+this.id);if(!A){A=$("grouped_main_"+this.id)}return A},startObservers:function(){if(this.isGrouped){return }var A=this.getAdminContainer();if(A){A.observe("mouseover",this.startShow.bind(this));A.observe("mouseout",this.startHide.bind(this));$("admin_text_"+this.id).childElements().each(function(B){if(B.hasClassName("admin_edit")){if(this.isGroupContainer){B.observe("click",this.editGroupText.bind(this))}else{B.observe("click",this.editText.bind(this))}}else{if(B.hasClassName("admin_grouped")){B.observe("click",this.editText.bind(this))}else{if(B.hasClassName("admin_delete")){if(this.isGroupContainer){B.observe("click",this.deleteGroupText.bind(this))}else{B.observe("click",this.deleteText.bind(this))}}}}},this)}},stopObservers:function(){if(this.isGrouped){return }var A=this.getAdminContainer();if(A){A.stopObserving();$("admin_text_"+this.id).childElements().each(function(B){B.stopObserving()})}this.doHide=true;this.hide()},getGroupContainerId:function(){var C,B,A=$("grouped_content_"+this.id);if(A){return A.parentNode.getAttribute("id").replace(/[^\d+]/g,"")}return null},getVisibleTextId:function(){if(!this.isGroupContainer){return null}var A=null,B=$("grouped_contents_"+this.id);$A(B.childNodes).each(function(C){if((C.nodeName=="DIV")&&C.hasClassName("grouped_selected")){A=C.getAttribute("id").replace(/[^\d]+/g,"")}});return A},editGroupText:function(A,B){if(!this.isGroupContainer){return }if(typeof (B)=="undefined"){B=this.getVisibleTextId()}if(B!=null){document["adminMenu"+B].editText()}},deleteGroupText:function(A,B){if(!this.isGroupContainer){return }if(typeof (B)=="undefined"){B=this.getVisibleTextId()}if(B!=null){document["adminMenu"+B].deleteText()}},editText:function(C){var D=$("txt_"+this.id),A,B;if(!D){return }D.setAttribute("id","edit_txt_"+this.id);this.stopObservers();disableSortable();switch(this.edit){case"tinymce":if(this.isGrouped){document["adminMenu"+this.getGroupContainerId()].stopObservers()}D.hide();A=D.innerHTML;A=A.replace(/<textarea/g,"<_textarea");A=A.replace(/<\/textarea/g,"</_textarea");B=document.createElement("textarea");B.setAttribute("id","txt_"+this.id);B.setAttribute("name","txt_"+this.id);B.value=A;if(D.style.height){B.style.height=D.offsetHeight+"px"}D.parentNode.insertBefore(B,D);tinyMCE.settings.delighttitle_title_field=$("title_txt_"+this.id);tinyMCE.settings.delighttitle_layout_field=$("layout_txt_"+this.id);tinyMCE.settings.delighttitle_options_field=$("options_txt_"+this.id);tinyMCE.settings.delighttitle_selected=this.id;tinyMCE.settings.width="100%";tinyMCE.settings.ajaxsave_close=this.closeTinymce.bind(this);tinyMCE.settings.ajaxsave_save=this.saveTinymce.bind(this);tinyMCE.execCommand("mceAddControl",true,"txt_"+this.id);break;case"gallery":openAdmin(1000,"image_content",this.id);break;case"files":openAdmin(1100,"download_content",this.id);break;case"news":openAdmin(1400,"news_content",this.id);break;case"grouped":openAdmin(2100,"group_content",this.id);break;case"iframe":openAdmin(2000,"iframe_content",this.id);break}},closeAdminEditor:function(){if($("edit_txt_"+this.id)){$("edit_txt_"+this.id).setAttribute("id","txt_"+this.id)}enableSortable();this.startObservers()},closeTinymce:function(A){var C=$("edit_txt_"+this.id),B=$("txt_"+this.id);tinyMCE.execCommand("mceRemoveControl",true,"txt_"+this.id);if(B){B.parentNode.removeChild(B)}if(C){C.setAttribute("id","txt_"+this.id);C.show()}if((typeof (A)!="boolean")||A){enableSortable();this.startObservers();if(this.isGrouped){document["adminMenu"+this.getGroupContainerId()].startObservers()}}},saveTinymce:function(){var B=this,C=$("edit_txt_"+this.id),A=tinyMCE.get("txt_"+this.id);A.setProgressState(1);new Ajax.Request("/delight_hp/index.php",{method:"post",contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:{adm:100,action:"save",text:B.id,content:(A.getContent()),title:($("title_txt_"+B.id).value),layout:($("layout_txt_"+B.id).value),options:($("options_txt_"+B.id).value),},onSuccess:function(D){if(D.responseJSON&&D.responseJSON.success){B.closeTinymce(false);var E=B.getAdminContainer();if(E&&!B.isGrouped){E.replace(D.responseJSON.content.replace(/\&\#34\;/g,"'"));E.style.position="relative"}else{if(B.isGrouped){$("txt_"+B.id).innerHTML=D.responseJSON.content.replace(/\&\#34\;/g,"'")}}B.startObservers();enableSortable();if(B.isGrouped){document["adminMenu"+B.getGroupContainerId()].startObservers()}A.setProgressState(0)}},onFailure:function(D){A.setProgressState(0);A.EditorManager.alert(response)}})},deleteText:function(D,C){if(!$("txt_"+this.id)){return }var B=this;var A=initAdminEditor();if(typeof (C)!="number"){C=0}if(C>100){alert("Beim ??ffnen des Editors ist etwas fehlgeschlagen. Es konnte keine Instanz des Editors erstellt werden w??hrend den letzten 100 Versuchen.");return }if(A==null){window.setTimeout(function(){B.deleteText(null,C++)},100);return }console.info("Tried to create an Instance "+C+" times...");A.windowManager.open({url:ADMIN_LINK_DELETE.replace(/&amp;/gi,"&")+B.id,width:500,height:150,inline:true,resizable:true,maximizable:true},{theme_url:tinymce.baseURL+"/themes/advanced/"})},startShow:function(A){this.doHide=false;if(!this.doShow){this.doShow=true;window.setTimeout(this.show.bind(this),this.showTimeout)}},startHide:function(A){if(this.doShow&&!this.doHide){this.doHide=true;window.setTimeout(this.hide.bind(this),this.hideTimeout)}},show:function(A){if(this.id>0){$("admin_text_"+this.id).show()}},hide:function(A){if(this.doHide&&(this.id>0)){this.doShow=false;this.doHide=true;$("admin_text_"+this.id).hide()}},utf8_encode:function(B){B=B.replace(/\r\n/g,"\n");var A="";for(var D=0;D<B.length;D++){var C=B.charCodeAt(D);if(C<128){A+=String.fromCharCode(C)}else{if((C>127)&&(C<2048)){A+=String.fromCharCode((C>>6)|192);A+=String.fromCharCode((C&63)|128)}else{A+=String.fromCharCode((C>>12)|224);A+=String.fromCharCode(((C>>6)&63)|128);A+=String.fromCharCode((C&63)|128)}}}return A},utf8_decode:function(A){var B="";var C=0;var D=c1=c2=0;while(C<A.length){D=A.charCodeAt(C);if(D<128){B+=String.fromCharCode(D);C++}else{if((D>191)&&(D<224)){c2=A.charCodeAt(C+1);B+=String.fromCharCode(((D&31)<<6)|(c2&63));C+=2}else{c2=A.charCodeAt(C+1);c3=A.charCodeAt(C+2);B+=String.fromCharCode(((D&15)<<12)|((c2&63)<<6)|(c3&63));C+=3}}}return B}});function makeSortable(A){Sortable.create("sortableContainer",{tag:"div",treeTag:"div",dropOnEmpty:true,containment:"sortableContainer",constraint:"vertical",onUpdate:function(){var B=Sortable.serialize("sortableContainer").replace(/sortableContainer\[\]=/g,"").replace(/&/g,",");new Ajax.Request("/delight_hp/index.php",{method:"post",parameters:{lang:"de",adm:157,order:B},onSuccess:function(C){},})},only:"sortable"})}function disableSortable(){Sortable.destroy("sortableContainer")}function enableSortable(){makeSortable()}Event.observe(window,"load",function(A){makeSortable()});if(typeof (console)!="object"){var console={debug:true,showFunctionsCode:false,showFunctions:true,method:"log",_consoleMethod:function(){if(!this.debug){return false}var C="white",B="black";switch(this.method){case"info":C="blue";B="white";break;case"error":C="red";break}var A=this._walk(arguments[0]);var D=document.createElement("div");D.style.position="absolute";D.style.zIndex=9999;D.style.overflow="auto";D.style.top=0;D.style.left=0;D.style.right=0;D.style.bottom=0;D.style.margin=0;D.style.padding="10px";D.style.background=C;D.style.color=B;D.innerHTML="<pre>"+A+"</pre>";D.ondblclick=function(E){E.currentTarget.parentNode.removeChild(E.currentTarget)};document.body.appendChild(D)},_walk:function(C,B){var D,E="",A="";if(typeof (B)!="number"){B=0}for(i=0;i<B;i++){E+="\t"}for(D in C){if(typeof (C[D])=="object"){A+=E+""+D+": ";A+=this._walk(C[D],B+1);A+="\n"}else{if((typeof (C[D])=="function")&&!this.showFunctionsCode){if(this.showFunctions){A+=E+""+D+": function()\n"}}else{if((typeof (C[D])=="function")&&!this.showFunctions){}else{A+=E+""+D+": ";A+=C[D];A+="\n"}}}}return A.replace(/\n+/g,"\n")},log:function(){this.method="log";this._consoleMethod.apply(this,arguments)},error:function(){this.method="error";this._consoleMethod.apply(this,arguments)},info:function(){this.method="info";this._consoleMethod.apply(this,arguments)},warn:function(){this.method="warn";this._consoleMethod.apply(this,arguments)},clear:function(){this.method="clear";this._consoleMethod.apply(this)},count:function(){this.method="count";this._consoleMethod.apply(this,arguments)},debug:function(){this.method="debug";this._consoleMethod.apply(this,arguments)},trace:function(){this.method="trace";this._consoleMethod.apply(this,arguments)},assert:function(){this.method="assert";this._consoleMethod.apply(this,arguments)}}};